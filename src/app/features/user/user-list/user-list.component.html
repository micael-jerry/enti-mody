<div class="container mt-3">
	<div class="row">
		<div class="col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-center mb-3">
						<h3 class="mb-0">Liste des utilisateurs</h3>
						<small class="text-muted">Total: {{ users().length }}</small>
					</div>
					<div class="table-responsive">
						<table class="table table-hover align-middle">
							<thead>
								<tr>
									<th scope="col">#</th>
									<th scope="col">Utilisateur</th>
									<th scope="col">Email</th>
									<th scope="col">Role</th>
								</tr>
							</thead>
							<tbody>
								@for (user of usersOnCurrentPage(); track user.id; let i = $index) {
									<tr>
										<th scope="row">{{ (currentPage() - 1) * PAGE_SIZE + i + 1 }}</th>
										<td class="d-flex align-items-center">
											<img
												alt="avatar"
												class="user-avatar me-2"
												height="48"
												ngSrc="assets/img/default-avatar.png"
												width="48" />
											<div>
												<div class="fw-bold">{{ user.name }}</div>
											</div>
										</td>
										<td>{{ user.email }}</td>
										<td>{{ formatUserRoles(user.Roles) }}</td>
									</tr>
								}
								@if (users().length === 0) {
									<td class="text-center text-muted py-4" colspan="5">Aucun utilisateur disponible</td>
								}
							</tbody>
						</table>
					</div>
					<div class="pro-pagination-style text-center mt-30">
						<ul>
							<li>
								<button class="prev" type="button" [disabled]="currentPage() === 1" (click)="prevPage()">
									<i class="fa fa-angle-double-left"></i>
								</button>
							</li>
							@for (p of pageNumbers(); track p) {
								<li>
									<button type="button" [class.active]="currentPage() === p" (click)="page = p">{{ p }}</button>
								</li>
							}
							<li>
								<button class="next" type="button" [disabled]="currentPage() === totalPages()" (click)="nextPage()">
									<i class="fa fa-angle-double-right"></i>
								</button>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
