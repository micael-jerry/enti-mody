<div class="container mt-3">
	<div class="row">
		<div class="col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-center mb-3">
						<div>
							<h3 class="mb-0">Liste des utilisateurs</h3>
							<small class="text-muted">Total: {{ users().length }}</small>
						</div>
						<div>
							<input
								#searchInputField
								placeholder="Search"
								type="text"
								(input)="onSearchQueryInput(searchInputField.value)" />
						</div>
					</div>
					<div class="table-responsive">
						<table class="table table-hover align-middle">
							<thead>
								<tr>
									<th scope="col">Id</th>
									<th scope="col">Name</th>
									<th scope="col">Email</th>
									<th scope="col">Role</th>
								</tr>
							</thead>
							<tbody>
								@for (user of users(); track user.id) {
									<tr>
										<th scope="row">{{ user.id }}</th>
										<td class="d-flex align-items-center">
											<img
												alt="avatar"
												class="user-avatar"
												height="48"
												ngSrc="assets/img/default-avatar.png"
												width="48" />
											<p class="fw-bold">{{ user.name }}</p>
										</td>
										<td>{{ user.email }}</td>
										<td>{{ formatUserRoles(user.Roles) }}</td>
									</tr>
								}
								@if (users().length === 0) {
									<td class="text-center text-muted py-4" colspan="5">Aucun utilisateur disponible</td>
								}
							</tbody>
						</table>
					</div>
					<div class="pro-pagination-style text-center mt-30">
						<ul>
							<li>
								<button
									class="prev"
									type="button"
									[disabled]="currentPage() === 1"
									(click)="onPageChange(currentPage() - 1)">
									<i class="fa fa-angle-double-left"></i>
								</button>
							</li>
							@for (p of pageNumbers(); track p) {
								<li>
									<button type="button" [class.active]="currentPage() === p" (click)="onPageChange(p)">{{ p }}</button>
								</li>
							}
							<li>
								<button
									class="next"
									type="button"
									[disabled]="currentPage() === totalPages()"
									(click)="onPageChange(currentPage() + 1)">
									<i class="fa fa-angle-double-right"></i>
								</button>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
